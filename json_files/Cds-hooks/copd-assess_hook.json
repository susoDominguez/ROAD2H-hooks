{
  "hookInstance": "d1577c69-dfbe-44ad-ba6d-3e05e953b2ea", //unique id for each request. Could be left fixed as we are not working with live patietns
  "fhirServer": "https://example.org/fhir", //Heliant's fhir server. OPTIONAL
  "hook": "copd-assess",
  "context": {
    "encounterId": "987654",
    "patientId": "1677163", //just added. Simply bc it is stated in Condition resources anyway.
    "medication": {
      "resourceType": "Medication",
      "id": "current_medication",
      "code": {
        "coding": [
          {
            "system": "http://anonymous.org/data/DrugTLaba",
            "code": "Laba",
            "display": "administer medication containing LABA"
          }
        ]
      }
    },
    "previousAssessment": {
      "resourceType": "Bundle",
      "entry": [
        {
          "resource": {
            "resourceType": "Observation", //back to Observation
            "id": "copd_group_prev",
            "status": "final",
            "code": {
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "1097861000000108",
                  "display": "Global Initiative for Chronic Obstructive Lung Disease 2017 group"
                }
              ]
            },
            "valueCodeableConcept": {
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "1097881000000104",
                  "display": "Global Initiative for Chronic Obstructive Lung Disease 2017 group B"
                }
              ]
            },
            "referenceRange": [
              //range of values for COPD Group
              {
                "low": {
                  "system": "http://snomed.info/sct",
                  "code": "1097871000000101",
                  "display": "Global Initiative for Chronic Obstructive Lung Disease 2017 group A"
                }
              },
              {
                "low": {
                  "system": "http://snomed.info/sct",
                  "code": "1097881000000104",
                  "display": "Global Initiative for Chronic Obstructive Lung Disease 2017 group B"
                }
              },
              {
                "high": {
                  "system": "http://snomed.info/sct",
                  "code": "1097891000000102",
                  "display": "Global Initiative for Chronic Obstructive Lung Disease 2017 group C"
                }
              },
              {
                "high": {
                  "system": "http://snomed.info/sct",
                  "code": "1097901000000101",
                  "display": "Global Initiative for Chronic Obstructive Lung Disease 2017 group D"
                }
              }
            ]
          }
        },
        {
          "resource": {
            "resourceType": "Observation",
            "id": "cat_score_prev",
            "status": "final",
            "code": {
              //this code doesnt change
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "446660005",
                  "display": "Chronic obstructive pulmonary disease assessment test score"
                }
              ]
            },
            "valueInteger": 10,
            "referenceRange": [
              {
                "low": {
                  "value": 0,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 9,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                }
              },
              {
                "low": {
                  "value": 10,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 20,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                }
              },
              {
                "low": {
                  "value": 21,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 30,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                }
              },
              {
                "low": {
                  "value": 31,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 40,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                }
              }
            ]
          }
        },
        {
          "resource": {
            "resourceType": "Observation",
            "id": "mmrc_prev",
            "status": "final",
            "code": {
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "450755002",
                  "display": "Medical Research Council Dyspnoea scale score"
                }
              ]
            },
            "valueInteger": 2,
            "referenceRange": [
              {
                "low": {
                  "value": 0,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "no breathlessness"
              },
              {
                "low": {
                  "value": 1,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "breathless when hurrying or walking up a hill"
              },
              {
                "high": {
                  "value": 2,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "breathless when walking slower than people of same age or has to stop when walking"
              },
              {
                "high": {
                  "value": 3,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "Stops for breath after walking 100 yards, or after a few minutes on level ground"
              },
              {
                "high": {
                  "value": 4,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "Too breathless to leave the house, or breathless when dressing"
              }
            ]
          }
        },
        {
          "resource": {
            "resourceType": "Observation",
            "id": "copd_exacerbations_number_prev",
            "status": "final",
            "valueInteger": 0,
            "code": {
              //this code never changes
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "723245007",
                  "display": "Number of chronic obstructive pulmonary disease exacerbations in past year"
                }
              ]
            }
          }
        }
      ]
    },
    "currentAssessment": {
      "resourceType": "Bundle",
      "entry": [
        {
          "resource": {
            "resourceType": "Observation",
            "id": "cat_score_curr",
            "status": "preliminary",
            "code": {
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "446660005",
                  "display": "Chronic obstructive pulmonary disease assessment test score"
                }
              ]
            },
            "valueInteger": 8,
            "referenceRange": [
              {
                "low": {
                  "value": 0,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 9,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "Low impact level"
              },
              {
                "low": {
                  "value": 10,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 20,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "Medium impact level"
              },
              {
                "low": {
                  "value": 21,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 30,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "High impact level"
              },
              {
                "low": {
                  "value": 31,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "high": {
                  "value": 40,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "Very high impact level"
              }
            ]
          }
        },
        {
          "resource": {
            "resourceType": "Observation",
            "id": "mmrc_curr",
            "status": "preliminary",
            "valueInteger": 1,
            "code": {
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "450755002",
                  "display": "Medical Research Council Dyspnoea scale score"
                }
              ]
            },
            "referenceRange": [
              {
                "low": {
                  "value": 0,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "no breathlessness"
              },
              {
                "low": {
                  "value": 1,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "breathless when hurrying or walking up a hill"
              },
              {
                "high": {
                  "value": 2,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "breathless when walking slower than people of same age or has to stop when walking"
              },
              {
                "high": {
                  "value": 3,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "Stops for breath after walking 100 yards, or after a few minutes on level ground"
              },
              {
                "high": {
                  "value": 4,
                  "system": "http://unitsofmeasure.org",
                  "code": "{score}"
                },
                "text": "Too breathless to leave the house, or breathless when dressing"
              }
            ]
          }
        },
        {
          "resource": {
            "resourceType": "Observation",
            "id": "copd_exacerbations_number_curr",
            "status": "preliminary",
            "valueInteger": 0,
            "code": {
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "723245007",
                  "display": "Number of chronic obstructive pulmonary disease exacerbations in past year"
                }
              ]
            }
          }
        }
      ]
    },
    "asthma": {
      //if patient does not have asthma, do not add this resource
      "resourceType": "Condition",
      "id": "asthma",
      "code": {
        "coding": [
          {
            "system": "http://snomed.info/sct",
            "code": "195967001",
            "display": "Asthma"
          }
        ]
      },
      "subject": {
        "reference": "Patient/1677163"
      }
    }
  }
}
